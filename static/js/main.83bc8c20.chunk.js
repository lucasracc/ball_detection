(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,n){},135:function(e,n){},136:function(e,n){},178:function(e,n){},179:function(e,n){},180:function(e,n){},181:function(e,n,t){},90:function(e,n,t){e.exports=t(91)},91:function(e,n,t){"use strict";t.r(n);var a=t(84),r=t(85),o=t(88),c=t(86),i=t(89),s=t(45),u=t(11),f=t.n(u),d=t(87),l=t.n(d),v=t(8),h=(t(181),function(e){return{detect:function(n){var t=v.h(function(){return v.a.fromPixels(n).expandDims(0)}),a=t.shape[1],r=t.shape[2];return e.executeAsync(t).then(function(e){var n=e[0].dataSync(),o=e[1].dataSync();t.dispose(),v.b(e);var c=function(e,n,t){for(var a=[],r=[],o=0;o<n;o++){for(var c=Number.MIN_VALUE,i=-1,s=0;s<t;s++)e[o*t+s]>c&&(c=e[o*t+s],i=s);a[o]=c,r[o]=i}return[a,r]}(n,e[0].shape[1],e[0].shape[2]),i=Object(s.a)(c,2),u=i[0],f=i[1],d=v.c();v.f("cpu");var l=v.h(function(){var n=v.g(o,[e[1].shape[1],e[1].shape[3]]);return v.d.nonMaxSuppression(n,u,20,.5,.5)}),h=l.dataSync();return l.dispose(),v.f(d),function(e,n,t,a,r,o){for(var c=r.length,i=[],s=0;s<c;s++){for(var u=[],f=0;f<4;f++)u[f]=t[4*r[s]+f];var d=u[0]*n,l=u[1]*e,v=u[2]*n,h=u[3]*e;u[0]=l,u[1]=d,u[2]=h-l,u[3]=v-d,i.push({bbox:u,class:o[r[s]],score:a[r[s]]})}return i}(r,a,o,u,h,f)})}}}),b=function(e){function n(){var e,t;Object(a.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(t=Object(o.a)(this,(e=Object(c.a)(n)).call.apply(e,[this].concat(i)))).videoRef=f.a.createRef(),t.canvasRef=f.a.createRef(),t.detectFrame=function(e,n,a){h(n).detect(e).then(function(r){t.renderPredictions(r,a),requestAnimationFrame(function(){t.detectFrame(e,n,a)})})},t.renderPredictions=function(e,n){var a=t.canvasRef.current.getContext("2d");a.clearRect(0,0,a.canvas.width,a.canvas.height);var r="16px sans-serif";a.font=r,a.textBaseline="top",e.forEach(function(e){var t=e.bbox[0],o=e.bbox[1],c=e.bbox[2],i=e.bbox[3],s=n[parseInt(e.class)];a.strokeStyle="#00FFFF",a.lineWidth=4,a.strokeRect(t,o,c,i),a.fillStyle="#00FFFF";var u=a.measureText(s).width,f=parseInt(r,10);a.fillRect(t,o,u+4,f+4)}),e.forEach(function(e){var t=e.bbox[0],r=e.bbox[1],o=n[parseInt(e.class)];a.fillStyle="#000000",a.fillText(o,t,r)})},t}return Object(i.a)(n,e),Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var n=navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}}).then(function(n){return window.stream=n,e.videoRef.current.srcObject=n,new Promise(function(n,t){e.videoRef.current.onloadedmetadata=function(){n()}})}),t=v.e("/ball_detection/model_web/model.json"),a=fetch("/ball_detection/model_web/labels.json").then(function(e){return e.json()});Promise.all([t,a,n]).then(function(n){var t=Object(s.a)(n,2),a=t[0],r=t[1];e.detectFrame(e.videoRef.current,a,r)}).catch(function(e){console.error(e)})}}},{key:"render",value:function(){return f.a.createElement("div",null,f.a.createElement("video",{className:"size",autoPlay:!0,playsInline:!0,muted:!0,ref:this.videoRef,width:"600",height:"500"}),f.a.createElement("canvas",{className:"size",ref:this.canvasRef,width:"600",height:"500"}))}}]),n}(f.a.Component),m=document.getElementById("root");l.a.render(f.a.createElement(b,null),m)},99:function(e,n){}},[[90,2,1]]]);
//# sourceMappingURL=main.83bc8c20.chunk.js.map